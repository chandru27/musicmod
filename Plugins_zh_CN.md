# 概述 #

> 音沐从最初版本起，就可以使用多种方式（Intent,Broadcast,AIDL）实现应用程序间的调用，自1.3.3 Preview版本后，加入了插件功能。音沐可以通过插件扩展其功能，其他应用程序也可以操作音沐的媒体服务，将其作为自己应用程序的一部分。

# 特别需要注意的地方 #

> 如果对Service方面不太熟悉，可以使用Broadcast对应用进行操作以及获取元信息、歌词等。

# 插件规范 #

> 音沐的插件，就是一个普通的应用程序。除了必要的两个要素，其他是没有任何限制的。

  * 包名

> 包名（Package name）是插件管理器判断应用程序是否为插件的唯一方式，作为插件，包名必须包含如下字段：

> _org.musicmod.plugin_

> 这个字段可以出现在包名的任意位置。

  * 打开插件的方式

> 音沐会尝试使用两种Intent打开插件，当插件管理器里的插件被点击后，音沐会顺次尝试

> `org.musicmod.android.CONFIGURE_PLUGIN`

> `org.musicmod.android.OPEN_PLUGIN`

> `[包名].CONFIGURE_PLUGIN`

> `[包名].OPEN_PLUGIN`

> 在四种方式都失败后，会显示“插件不被支持”的Toast。因此，要编写出可以在插件管理器中打开的插件，需要在你的插件的Manifest中在希望打开的Activity中增加前面的Intent的其中一个， **最好** 加入前两个。

  * 关于应用程序描述

> 音沐会在插件管理器的插件名称下方显示描述。因此，我推荐在Manifest中写入描述，也可以在描述中写入开发者的名字。

  * 对于插件的一些注意事项

> 音沐的插件管理器只有打开插件和打开卸载确认的功能，音沐不会主动改变插件的行为或配置，也 **不会** 自行卸载它们。

# 接口调用 #

> 音沐的核心，是由Eliot Stocker编写的Music Mod，而Music Mod则是基于Android Music修改的。原先调用Android Music的方式几乎完全可以兼容音沐，你所需要做的只是修改几个字段（比如包名）即可。